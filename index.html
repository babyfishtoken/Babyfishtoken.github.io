<!DOCTYPE html>
<html>
<head>
  <title>Token Creator</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body>

<h2>Polygon Token Creator</h2>

<button onclick="connectWallet()">Connect Wallet</button>

<br><br>

<input id="name" placeholder="Token Name">
<br><br>
<input id="symbol" placeholder="Token Symbol">
<br><br>

<button onclick="createToken()">Create Token</button>

<h3 id="result"></h3>

<script>

const factoryAddress = "0x9033926CE8EfFBD2435c560844abe50E895018DF";

const factoryABI = [
  {
    "inputs":[
      {"internalType":"string","name":"name","type":"string"},
      {"internalType":"string","name":"symbol","type":"string"}
    ],
    "name":"createToken",
    "outputs":[{"internalType":"address","name":"","type":"address"}],
    "stateMutability":"nonpayable",
    "type":"function"
  }
];

let contract;

async function connectWallet() {
  if (window.ethereum) {
    await window.ethereum.request({ method: "eth_requestAccounts" });

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();

    contract = new ethers.Contract(factoryAddress, factoryABI, signer);

    alert("Wallet Connected");
  } else {
    alert("Please install MetaMask");
  }
}

async function createToken() {
  if (!contract) {
    alert("Connect wallet first");
    return;
  }

  const name = document.getElementById("name").value;
  const symbol = document.getElementById("symbol").value;

  try {
    const tx = await contract.createToken(name, symbol);
    document.getElementById("result").innerText = "Waiting for transaction...";
    const receipt = await tx.wait();

    document.getElementById("result").innerText = "Token Created!";

  } catch (err) {
    console.log(err);
    document.getElementById("result").innerText = "Error";
  }
}

</script>

</body>
</html>
