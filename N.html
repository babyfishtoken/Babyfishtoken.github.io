<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù†</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<style>
body{
  background:#0f172a;
  color:white;
  font-family:tahoma;
  text-align:center;
  padding:20px;
}
input,select,button{
  padding:12px;
  margin:8px;
  border-radius:10px;
  border:none;
  width:90%;
  max-width:400px;
}
.box{
  background:#1e293b;
  padding:15px;
  border-radius:10px;
  margin-top:20px;
}
</style>
</head>

<body>

<h2>ğŸ” Ø¨Ø±Ø±Ø³ÛŒ ØªÙˆÚ©Ù† ØªØ§Ø²Ù‡</h2>

<select id="network">
  <option value="bsc">BSC</option>
  <option value="eth">Ethereum</option>
</select>

<br>

<input id="address" placeholder="Ø¢Ø¯Ø±Ø³ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ØªÙˆÚ©Ù†">

<br>

<button onclick="loadToken()">Ø¨Ø±Ø±Ø³ÛŒ</button>

<div id="out"></div>

<script>

// RPC Ù‡Ø§ÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø± Ù…Ø®ØµÙˆØµ Ù…ÙˆØ¨Ø§ÛŒÙ„
const RPCS = {
  bsc: [
    "https://bsc-dataseed1.binance.org",
    "https://rpc.ankr.com/bsc"
  ],
  eth: [
    "https://eth.llamarpc.com",
    "https://rpc.ankr.com/eth"
  ]
};

const ABI = [
  "function name() view returns (string)",
  "function symbol() view returns (string)",
  "function decimals() view returns (uint8)"
];

async function tryProvider(url, address){
  const provider = new ethers.providers.JsonRpcProvider(url);
  const token = new ethers.Contract(address, ABI, provider);

  let name="Unknown";
  let symbol="???";
  let decimals=18;

  try{ name = await token.name(); }catch{}
  try{ symbol = await token.symbol(); }catch{}
  try{ decimals = await token.decimals(); }catch{}

  return {name, symbol, decimals};
}

async function loadToken(){

  const net = document.getElementById("network").value;
  const addr = document.getElementById("address").value.trim();
  const out = document.getElementById("out");

  if(!navigator.onLine){
    out.innerHTML="âŒ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù‚Ø·Ø¹ Ø§Ø³Øª";
    return;
  }

  if(!addr){
    alert("Ø¢Ø¯Ø±Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†");
    return;
  }

  out.innerHTML="â³ Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¨Ù„Ø§Ú©Ú†ÛŒÙ†...";

  const rpcList = RPCS[net];

  for(let i=0;i<rpcList.length;i++){
    try{
      const data = await tryProvider(rpcList[i], addr);

      out.innerHTML = `
      <div class="box">
        <h3>${data.name} (${data.symbol})</h3>
        Ø§Ø¹Ø´Ø§Ø±: ${data.decimals}<br>
        Ø´Ø¨Ú©Ù‡: ${net}<br><br>
        âœ”ï¸ ØªÙˆÚ©Ù† Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯
      </div>
      `;

      return;

    }catch(e){
      console.log("RPC failed:", rpcList[i]);
    }
  }

  out.innerHTML="âŒ ØªÙˆÚ©Ù† ÛŒØ§ÙØª Ù†Ø´Ø¯ ÛŒØ§ Ø´Ø¨Ú©Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª";
}
</script>

</body>
</html>
