<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù†</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<style>
body{
  background:#0f172a;
  color:white;
  font-family:tahoma;
  text-align:center;
  padding:20px;
}
input,button{
  padding:12px;
  margin:10px;
  border-radius:10px;
  border:none;
  width:90%;
  max-width:400px;
}
.box{
  background:#1e293b;
  padding:15px;
  border-radius:10px;
  margin-top:20px;
}
</style>
</head>

<body>

<h2>ğŸ” Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù† ØªØ§Ø²Ù‡</h2>

<button onclick="connect()">Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„</button>

<br>

<input id="address" placeholder="Ø¢Ø¯Ø±Ø³ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ØªÙˆÚ©Ù†">

<br>

<button onclick="loadToken()">Ø¨Ø±Ø±Ø³ÛŒ</button>

<div id="out"></div>

<script>

let provider;

async function connect(){
  if(!window.ethereum){
    alert("Ù„Ø·ÙØ§Ù‹ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…Ø«Ù„ Metamask Ù†ØµØ¨ Ú©Ù†");
    return;
  }

  await window.ethereum.request({ method: "eth_requestAccounts" });
  provider = new ethers.providers.Web3Provider(window.ethereum);

  document.getElementById("out").innerHTML="âœ… Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ø´Ø¯";
}

const ABI = [
  "function name() view returns (string)",
  "function symbol() view returns (string)",
  "function decimals() view returns (uint8)"
];

async function loadToken(){

  const addr = document.getElementById("address").value.trim();
  const out = document.getElementById("out");

  if(!provider){
    alert("Ø§ÙˆÙ„ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø±Ø§ ÙˆØµÙ„ Ú©Ù†");
    return;
  }

  out.innerHTML="â³ Ø¯Ø± Ø­Ø§Ù„ Ø®ÙˆØ§Ù†Ø¯Ù† Ø§Ø² Ø¨Ù„Ø§Ú©Ú†ÛŒÙ†...";

  try{
    const token = new ethers.Contract(addr, ABI, provider);

    let name="Unknown";
    let symbol="???";
    let decimals=18;

    try{ name = await token.name(); }catch{}
    try{ symbol = await token.symbol(); }catch{}
    try{ decimals = await token.decimals(); }catch{}

    out.innerHTML = `
      <div class="box">
        <h3>${name} (${symbol})</h3>
        Ø§Ø¹Ø´Ø§Ø±: ${decimals}<br>
        âœ”ï¸ ØªÙˆÚ©Ù† Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯
      </div>
    `;

  }catch(e){
    console.log(e);
    out.innerHTML="âŒ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ØªÙˆÚ©Ù† Ù†ÛŒØ³Øª";
  }
}

</script>
</body>
</html>
