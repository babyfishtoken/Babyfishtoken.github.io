<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ ØªØ§Ø²Ù‡ Ù„Ø§Ù†Ú† Ø´Ø¯Ù‡</title>

<style>
body{
  font-family:tahoma;
  background:#0f172a;
  color:white;
  text-align:center;
}
.card{
  background:#1e293b;
  margin:15px;
  padding:15px;
  border-radius:10px;
}
button{
  padding:10px;
  margin:10px;
  border-radius:8px;
  border:none;
}
</style>
</head>

<body>

<h2>ğŸ”¥ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ ØªØ§Ø²Ù‡ Ù„Ø§Ù†Ú† Ø´Ø¯Ù‡</h2>

<select id="network">
  <option value="bsc">BSC</option>
  <option value="ethereum">Ethereum</option>
  <option value="polygon">Polygon</option>
</select>

<br>

<button onclick="loadNew()">Ù†Ù…Ø§ÛŒØ´ Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†â€ŒÙ‡Ø§</button>

<div id="result"></div>

<script>
async function loadNew(){
  const net=document.getElementById("network").value;
  const result=document.getElementById("result");
  result.innerHTML="Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...";

  try{
    const res=await fetch(`https://api.dexscreener.com/latest/dex/pairs/${net}`);
    const data=await res.json();

    if(!data.pairs){
      result.innerHTML="Ú†ÛŒØ²ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯";
      return;
    }

    // Ù…Ø±ØªØ¨ Ø³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ (Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†)
    const sorted=data.pairs
      .filter(p=>p.pairCreatedAt)
      .sort((a,b)=>b.pairCreatedAt - a.pairCreatedAt)
      .slice(0,20);

    let html="";

    sorted.forEach(p=>{
      html+=`
      <div class="card">
        <h3>${p.baseToken.name} (${p.baseToken.symbol})</h3>
        Ù‚ÛŒÙ…Øª: $${p.priceUsd || 0}<br>
        Ù„ÛŒÚ©ÙˆØ¦ÛŒØ¯ÛŒØªÛŒ: $${p.liquidity?.usd || 0}<br>
        Ø²Ù…Ø§Ù† Ø³Ø§Ø®Øª: ${new Date(p.pairCreatedAt).toLocaleString()}<br>
        Ø¢Ø¯Ø±Ø³: <small>${p.baseToken.address}</small>
      </div>
      `;
    });

    result.innerHTML=html;

  }catch(e){
    result.innerHTML="Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª";
  }
}
</script>

</body>
</html>
